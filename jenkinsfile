pipeline {
    agent any

    stages {
        stage('Tests') {
            steps {
                echo '🧪 Lancement des tests HTMLHint et Stylelint...'
                sh 'npm install'  // Installe les dépendances déclarées dans package.json
                sh 'npm test'     // Exécute le script "test" défini dans package.json
            }
        }

        stage('Build') {
            steps {
                echo '🔨 Étape de construction terminée (rien à construire pour un projet HTML/CSS/JS simple)'
            }
        }

        stage('Deploy') {
            steps {
                echo '🚀 Étape de déploiement fictif (à connecter plus tard avec Netlify ou autre outil)'
            }
        }
    }

    post {
        success {
            echo "✅ Pipeline terminé avec succès !"
        }
        failure {
            echo "❌ Le pipeline a échoué. Vérifiez les logs ci-dessus."
        }
    }
}
